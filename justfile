default: test

gen:
	go mod tidy
	go generate ./...
	goimports -local=github.com/dynoinc/starflow -w .

lint: gen
	go vet ./...
	staticcheck ./...
	govulncheck ./...

test: lint
	go mod verify
	go build ./...
	go test -v -race ./...
